"use strict";function asyncGeneratorStep(e,i,r,t,n,l,s){try{var p=e[l](s),u=p.value}catch(e){return void r(e)}p.done?i(u):Promise.resolve(u).then(t,n)}function _asyncToGenerator(p){return function(){var e=this,s=arguments;return new Promise(function(i,r){var t=p.apply(e,s);function n(e){asyncGeneratorStep(t,i,r,n,l,"next",e)}function l(e){asyncGeneratorStep(t,i,r,n,l,"throw",e)}n(void 0)})}}var gulp=require("gulp"),cleanCSS=require("gulp-clean-css"),htmlmin=require("gulp-html-minifier-terser"),htmlclean=require("gulp-htmlclean"),imagemin=require("gulp-imagemin"),workbox=require("workbox-build"),uglify=require("gulp-uglify"),babel=require("gulp-babel");gulp.task("generate-service-worker",function(){return workbox.injectManifest({swSrc:"./sw-template.js",swDest:"./public/sw.js",globDirectory:"./public",globPatterns:["**/*.{html,css,js,json,woff2}"],modifyURLPrefix:{"":"./"}})}),gulp.task("compress",function(){return gulp.src(["./public/**/*.js","!./public/**/*.min.js"]).pipe(babel({presets:["@babel/preset-env"]})).pipe(uglify().on("error",function(e){console.log(e)})).pipe(gulp.dest("./public"))}),gulp.task("minify-css",function(){return gulp.src("./public/**/*.css").pipe(cleanCSS({compatibility:"ie11"})).pipe(gulp.dest("./public"))}),gulp.task("minify-html",function(){return gulp.src("./public/**/*.html").pipe(htmlclean()).pipe(htmlmin({removeComments:!0,collapseWhitespace:!0,collapseBooleanAttributes:!0,removeEmptyAttributes:!0,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,minifyJS:!0,minifyCSS:!0,minifyURLs:!0})).pipe(gulp.dest("./public"))}),gulp.task("minify-images",_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:gulp.src("./public/img/**/*.*").pipe(imagemin({optimizationLevel:5,progressive:!0,interlaced:!1,multipass:!1})).pipe(gulp.dest("./public/img"));case 1:case"end":return e.stop()}},e)}))),gulp.task("default",gulp.series("generate-service-worker",gulp.parallel("compress","minify-html","minify-css","minify-images")));