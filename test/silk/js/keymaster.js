"use strict";!function(n){var e,c={},f={16:!1,18:!1,17:!1,91:!1},t="all",a={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},s={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},u=[];for(e=1;e<20;e++)a["f"+e]=111+e;function d(e,n){for(var t=e.length;t--;)if(e[t]===n)return t;return-1}function p(e,n,t){var o,r,i,l;for(void 0===t&&(t=n,n="all"),""==(o=(e=e.replace(/\s/g,"")).split(","))[o.length-1]&&(o[o.length-2]+=","),i=0;i<o.length;i++){if(r=[],1<(e=o[i].split("+")).length){for(r=e.slice(0,e.length-1),l=0;l<r.length;l++)r[l]=a[r[l]];e=[e[e.length-1]]}e=e[0],(e=s[e]||e.toUpperCase().charCodeAt(0))in c||(c[e]=[]),c[e].push({shortcut:o[i],scope:n,method:t,key:o[i],mods:r})}}for(e in a)p[e]=!1;function o(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent&&e.attachEvent("on"+n,function(){t(window.event)})}o(document,"keydown",function(e){!function(e,n){var t,o,r,i,l;if(t=e.keyCode,-1==d(u,t)&&u.push(t),93!=t&&224!=t||(t=91),t in f)for(r in f[t]=!0,a)a[r]==t&&(p[r]=!0);else if(p.filter.call(this,e)&&t in c)for(i=0;i<c[t].length;i++)if((o=c[t][i]).scope==n||"all"==o.scope){for(r in l=0<o.mods.length,f)(!f[r]&&-1<d(o.mods,+r)||f[r]&&-1==d(o.mods,+r))&&(l=!1);(0!=o.mods.length||f[16]||f[18]||f[17]||f[91])&&!l||!1===o.method(e,o)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e,t)}),o(document,"keyup",function(e){var n,t=e.keyCode,o=d(u,t);if(0<=o&&u.splice(o,1),93!=t&&224!=t||(t=91),t in f)for(n in f[t]=!1,a)a[n]==t&&(p[n]=!1)}),o(window,"focus",function(){for(e in f)f[e]=!1;for(e in a)p[e]=!1});var r=n.key;n.key=p,n.key.setScope=function(e){t=e||"all"},n.key.getScope=function(){return t||"all"},n.key.deleteScope=function(e){var n,t,o;for(n in c)for(t=c[n],o=0;o<t.length;)t[o].scope===e?t.splice(o,1):o++},n.key.filter=function(e){var n=(e.target||e.srcElement).tagName;return!("INPUT"==n||"SELECT"==n||"TEXTAREA"==n)},n.key.isPressed=function(e){if("string"==typeof e){if(1!=e.length)return!1;e=e.toUpperCase().charCodeAt(0)}return-1!=d(u,e)},n.key.getPressedKeyCodes=function(){return u.slice(0)},n.key.noConflict=function(){var e=n.key;return n.key=r,e},"undefined"!=typeof module&&(module.exports=key)}(void 0);