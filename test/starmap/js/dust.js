"use strict";var dustTexture=THREE.ImageUtils.loadTexture("https://cdn.jsdelivr.net/gh/LuoGuiHai/CDN/test/starmap/images/dust.png"),dustUniforms={color:{type:"c",value:new THREE.Color(16777215)},scale:{type:"f",value:1},texture0:{type:"t",value:dustTexture},cameraPitch:{type:"f",value:0}},dustAttributes={size:{type:"f",value:[]},customColor:{type:"c",value:[]}};function generateDust(){for(var e=new THREE.ShaderMaterial({uniforms:dustUniforms,attributes:dustAttributes,vertexShader:shaderList.galacticdust.vertex,fragmentShader:shaderList.galacticdust.fragment,blending:THREE.SubtractiveBlending,depthTest:!1,depthWrite:!1,transparent:!0,sizeAttenuation:!1}),t=new THREE.Geometry,a=0,r=0,s=0,i=0;i<1e4;i++){var o=Math.cos(r)*s,n=0,u=Math.sin(r)*s,c=120-Math.sqrt(s);.3<Math.random()&&(c*=4*(1+Math.random())),o+=random(-c,c),u+=random(-c,c);var d=Math.sqrt(o*o+u*u),m=constrain(.02*Math.pow(constrain(60-.1*d,0,1e5),2),2,1e4)+20*Math.random();n+=random(-m,m),o*=20,n*=20,u*=20;var l=new THREE.Vector3(o,n,u);l.size=140+constrain(300/s,0,8e3),.99<Math.random()&&(l.size*=.2*Math.pow(1+Math.random(),4+3*Math.random())),t.vertices.push(l);var h=new THREE.Color;h.r=1,h.g=1,h.b=1,t.colors.push(h),r-=.0012,s+=.5,i%2e3==0&&(r=2*Math.PI/5*a,s=0,a++)}pDustSystem=new THREE.ParticleSystem(t,e);for(var v=dustAttributes.size.value,p=dustAttributes.customColor.value,f=0;f<t.vertices.length;f++)v[f]=t.vertices[f].size,p[f]=t.colors[f];var y=2*Math.PI;return pDustSystem.update=function(){for(dustUniforms.cameraPitch.value=rotating.rotation.x;dustUniforms.cameraPitch.value>y;)dustUniforms.cameraPitch.value-=y;for(;dustUniforms.cameraPitch.value<-y;)dustUniforms.cameraPitch.value+=y;var t=window.innerWidth*window.innerHeight;dustUniforms.scale.value=t/720,camera.position.z<2500?0<e.opacity&&(e.opacity-=.05):e.opacity<1&&(e.opacity+=.05),e.opacity<=0?pDustSystem.visible=!1:pDustSystem.visible=!0},pDustSystem}