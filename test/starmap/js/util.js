"use strict";function toTHREEColor(n){return new THREE.Color(parseInt(n.substr(1),16))}var monthNames=new Array(12);function toMonthName(n){return monthNames[n]}function componentToHex(n){var e=n.toString(16);return 1==e.length?"0"+e:e}function rgbToHex(n,e,t){return"#"+componentToHex(n)+componentToHex(e)+componentToHex(t)}function gup(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+n+"=([^&#]*)").exec(window.location.href);return null==e?"":e[1]}function wrap(n,e,t){for(t-=e;n<e;)n+=t;return n%t}function getAbsOrigin(n){var e=n.matrixWorld,t=new THREE.Vector3;return t.x=e.n14,t.y=e.n24,t.z=e.n34,t}monthNames[0]="January",monthNames[1]="February",monthNames[2]="March",monthNames[3]="April",monthNames[4]="May",monthNames[5]="June",monthNames[6]="July",monthNames[7]="August",monthNames[8]="September",monthNames[9]="October",monthNames[10]="November",monthNames[11]="December",THREE.Curve.Utils.createLineGeometry=function(n){for(var e=new THREE.Geometry,t=0;t<n.length;t++)e.vertices.push(n[t]);return e};var projector=new THREE.Projector;function screenXY(n){var e=projector.projectVector((new THREE.Vector3).getPositionFromMatrix(n.matrixWorld),camera),t=new Object,r=window.innerWidth;return r<1280&&(r=1280),t.x=Math.round(e.x*(r/2))+r/2,t.y=Math.round((0-e.y)*(window.innerHeight/2))+window.innerHeight/2,t}function buildHexColumnGeo(n,e){for(var t=[],r=0,o=2*Math.PI/6,a=0;a<7;a++){var i=Math.cos(r)*n,u=-Math.sin(r)*n;t.push(new THREE.Vector2(i,u)),r+=o}var c=new THREE.Shape(t),m={size:0,amount:e,steps:1,bevelEnabled:!1};return new THREE.ExtrudeGeometry(c,m)}function numberWithCommas(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function roundNumber(n,e){return Math.round(n*Math.pow(10,e))/Math.pow(10,e)}function save(o,a,n){function u(n,e,t,r){var o,a,i=0,u=Math.min(n.length,r);for(o=0;o<u;o++)a=n.charCodeAt(o),i+=e[t]=a,t+=1;return i}function c(n,e){if(e<n.length)throw new Error("Incompatible size");for(var t=e-n.length,r=0;r<t;r++)n="0"+n;return n}window.webkitRequestFileSystem(window.TEMPORARY,1048576,function(n){var e=function(){n.root.getFile("data.tar",{create:!0},function(r){r.createWriter(function(n){var e=new window.WebKitBlobBuilder;o=function(n){for(var e=512-n.length%512,t=new ArrayBuffer(n.length+e),r=new Uint8Array(t),o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return t}(o);var t=function(n,e,t){var r=new ArrayBuffer(512),o=new Uint8Array(r),a=0;a+=u(n,o,0,99),a+=u(e.toString(8),o,124,12),a+=u(c("644 \0",8),o,100,8);var i=(new Date).getTime();return i=Math.floor(i/1e3),a+=u(i.toString(8),o,136,12),a+=u("0",o,156,1),a+=u("ustar ",o,257,6),a+=u("00",o,263,2),u(c((a+=256).toString(8)+"\0 ",8),o,148,8),r}(a,o.byteLength);e.append(t),e.append(o),n.write(e.getBlob("tar/archive")),window.open(r.toURL(),"_blank","width=400,height=10")},function(n){})},function(n){})};n.root.getFile("data.tar",{create:!1},function(n){n.remove(e,function(n){})},e)},function(n){})}function constrain(n,e,t){return n<e?n=e:t<n&&(n=t),n}function random(n,e){if(e<=n)return n;var t=e-n;return Math.random()*t+n}function map(n,e,t,r,o){return r+(n-e)/(t-e)*(o-r)}