"use strict";var starModel;function makeStarModels(){setLoadMessage("Forging stars");var t=makeSun({radius:7.35144e-8,spectral:.656});t.visible=!1;for(var a=[],e=0;e<6;e++){var s=makeSun({radius:7.35144e-8,spectral:.656});a.push(s)}return t.substars=a,t}function hideAllSubStars(){var t=starModel.substars;for(var a in t)t[a].update=void 0,starModel.remove(t[a])}function setStarModel(t,a){hideAllSubStars(),starModel.position.copy(t);var e=starSystems[a];void 0===e&&starModel.setSpectralIndex(0);var s=e.sub[0];"Sol"===a?starModel.setSpectralIndex(.9):starModel.setSpectralIndex(s.c),starModel.setScale(s.radius),starModel.randomizeSolarFlare();Math.random(),Math.random();var r=e.sub.length-1;if(!(r<=0))for(var o=.01*AUToLY(e.sep),i=0;i<r;i++){var n=e.sub[i+1],d=i,l=starModel.substars[d];starModel.add(l),l.setSpectralIndex(n.c),l.setScale(n.radius),l.randomizeSolarFlare(),l.offset=6e-4*AUToLY(n.offset);Math.random();if(l.angle=Math.random()*Math.PI*2,l.rSpeed=.004*Math.random(),e.sep<=0)l.update=function(){this.angle+=this.rSpeed,this.position.x=Math.cos(this.angle)*this.offset,this.position.y=Math.sin(this.angle)*this.offset,this.rotation.x+=1e-4*this.angle,this.rotation.y+=.001*this.angle};else{var h=2*Math.PI*Math.random(),u=o;l.position.x=Math.cos(h)*u,l.position.y=Math.sin(h)*u}}}function getZoomByStarRadius(t){var a=constrain(t-1,0,1e4);return 1+.12*Math.sqrt(a)}function getOffsetByStarRadius(t){var a=new THREE.Vector3;return camera.position.target.x=6<t?constrain(25e-9*t,-1e-7,1e3):-5e-8,a}