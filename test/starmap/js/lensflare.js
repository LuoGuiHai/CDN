"use strict";var textureFlare0=THREE.ImageUtils.loadTexture("https://cdn.jsdelivr.net/gh/LuoGuiHai/CDN/test/starmap/images/lensflare/lensflare0.png"),textureFlare1=THREE.ImageUtils.loadTexture("https://cdn.jsdelivr.net/gh/LuoGuiHai/CDN/test/starmap/images/lensflare/lensflare1.png"),textureFlare2=THREE.ImageUtils.loadTexture("https://cdn.jsdelivr.net/gh/LuoGuiHai/CDN/test/starmap/images/lensflare/lensflare2.png"),textureFlare3=THREE.ImageUtils.loadTexture("https://cdn.jsdelivr.net/gh/LuoGuiHai/CDN/test/starmap/images/lensflare/lensflare3.png",void 0,setLoadMessage("Calibrating optics"));function addLensFlare(e,a,t,l,r){var n=new THREE.Color(16777215);return n.offsetHSL(.08,.5,.5),lensFlare=new THREE.LensFlare(r||textureFlare0,700,0,THREE.AdditiveBlending,n),lensFlare.add(textureFlare1,4096,0,THREE.AdditiveBlending),lensFlare.add(textureFlare2,512,0,THREE.AdditiveBlending),lensFlare.add(textureFlare2,512,0,THREE.AdditiveBlending),lensFlare.add(textureFlare2,512,0,THREE.AdditiveBlending),lensFlare.customUpdateCallback=lensFlareUpdateCallback,lensFlare.position=new THREE.Vector3(e,a,t),lensFlare.size=l||16e3,lensFlare}function addStarLensFlare(e,a,t,l,r,n){var s=new THREE.Color(16777215);n=1-n,n=constrain(n,0,1);var i=gradientCanvas.getColor(n);s.setRGB(i[0]/255,i[1]/255,i[2]/255);var d=1.25-Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)+Math.pow(i[2],2))/255*1.25;return s.offsetHSL(0,-.15,d),lensFlare=new THREE.LensFlare(r||textureFlare0,700,0,THREE.AdditiveBlending,s),lensFlare.customUpdateCallback=lensFlareUpdateCallback,lensFlare.position=new THREE.Vector3(e,a,t),lensFlare.size=l||16e3,lensFlare.add(textureFlare1,512,0,THREE.AdditiveBlending),lensFlare.add(textureFlare3,40,.6,THREE.AdditiveBlending),lensFlare.add(textureFlare3,80,.7,THREE.AdditiveBlending),lensFlare.add(textureFlare3,120,.9,THREE.AdditiveBlending),lensFlare.add(textureFlare3,60,1,THREE.AdditiveBlending),lensFlare}function lensFlareUpdateCallback(e){var a,t,l=this.lensFlares.length,r=2*-this.positionScreen.x,n=2*-this.positionScreen.y,s=e.size?e.size:16e3,i=camera.position.length(),d=pSystem?pSystem.shaderMaterial.uniforms.heatVision.value:0;for(a=0;a<l;a++)(t=this.lensFlares[a]).x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+n*t.distance,t.scale=s/i,t.rotation=0,t.opacity=1-d}