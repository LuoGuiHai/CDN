"use strict";function initCSS3D(){screenWhalf=screenWidth/2,screenHhalf=screenHeight/2,screenWidth=window.innerWidth,screenHeight=window.innerHeight,divCSSWorld=document.getElementById("css-world"),divCSSCamera=document.getElementById("css-camera"),divCube=document.getElementById("shape"),fovValue=.5/Math.tan(camera.fov*Math.PI/360)*screenHeight,setCSSWorld()}function setCSSWorld(){divCSSWorld.style.WebkitPerspective=fovValue+"px",divCSSWorld.style.WebkitPerspectiveOrigin="50% 50%",divCSSWorld.style.MozPerspective=fovValue+"px",divCSSWorld.style.MozPerspectiveOrigin="50% 50%"}function setCSSCamera(e,t){var n=getCSS3D_cameraStyle(e,t);divCSSCamera.style.WebkitTransform=n,divCSSCamera.style.MozTransform=n}function getCSS3D_cameraStyle(e,t){e.updateProjectionMatrix();var n="";return n+="translate3d(0,0,"+epsilon(t)+"px) ",n+=toCSSMatrix(e.matrixWorldInverse,!0),n+=" translate3d("+screenWhalf+"px,"+screenHhalf+"px, 0)"}function toCSSMatrix(e,t,n,s){var r,l=e;for(var i in r=t?[l.elements[0],-l.elements[1],l.elements[2],l.elements[3],l.elements[4],-l.elements[5],l.elements[6],l.elements[7],l.elements[8],-l.elements[9],l.elements[10],l.elements[11],l.elements[12],-l.elements[13],l.elements[14],l.elements[15]]:[l.elements[0],l.elements[1],l.elements[2],l.elements[3],l.elements[4],l.elements[5],l.elements[6],l.elements[7],l.elements[8],l.elements[9],l.elements[10],l.elements[11],l.elements[12]+(n||0),l.elements[13]+(s||0),l.elements[14],l.elements[15]])r[i]=epsilon(r[i]);return"matrix3d("+r.join(",")+")"}function setDivPosition(e,t,n){t.updateMatrix(),e.style.position="absolute";var s=CSStransform(1,3.5,t.matrixWorld,n);e.style.WebkitTransformOrigin="0% 0%",e.style.WebkitTransform=s,e.style.MozTransformOrigin="0% 0%",e.style.MozTransform=s}function CSStransform(e,t,n,s){return[toCSSMatrix(n,!1,e,t),"scale3d("+s+", -"+s+", "+s+")","translate3d(0,0,0)"].join(" ")}function epsilon(e){return Math.abs(e)<1e-6?0:e}