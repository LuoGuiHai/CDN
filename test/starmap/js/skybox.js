"use strict";var skybox,skyboxUniforms,cameraCube,sceneCube;function setupSkyboxScene(){cameraCube=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1e7),sceneCube=new THREE.Scene}function initSkybox(e){setLoadMessage("Loading internal stars");var a="https://cdn.jsdelivr.net/gh/LuoGuiHai/CDN/test/starmap/images/ss_skybox/";0==e&&(a+="s_");var r=[a+"px.jpg",a+"nx.jpg",a+"py.jpg",a+"ny.jpg",a+"pz.jpg",a+"nz.jpg"],t=THREE.ImageUtils.loadTextureCube(r,void 0,setLoadMessage("Loading interstellar bodies"));t.anisotropy=maxAniso;var o=THREE.ShaderLib.cube;o.uniforms.tCube.value=t,o.uniforms.opacity={value:1,type:"f"},skyboxUniforms=o.uniforms;var n=new THREE.ShaderMaterial({fragmentShader:shaderList.cubemapcustom.fragment,vertexShader:shaderList.cubemapcustom.vertex,uniforms:o.uniforms,side:THREE.BackSide,depthWrite:!1,depthTest:!1});skybox=new THREE.Mesh(new THREE.CubeGeometry(1e3,1e3,1e3),n),sceneCube.add(skybox)}function updateSkybox(e){var a;(cameraCube.rotation.order="YXZ",starModel)?((a=starModel.rotation.clone()).x-=Math.PI/4,a.y+=Math.PI/4,cameraCube.rotation.copy(a)):((a=rotating.rotation.clone()).x-=Math.PI/4,a.y+=Math.PI/4,cameraCube.rotation.copy(a));cameraCube.fov=constrain(20*camera.position.z,60,70),cameraCube.updateProjectionMatrix();var r=constrain(1.4/camera.position.z,0,1);skyboxUniforms.opacity.value=r}function renderSkybox(){renderer.render(sceneCube,cameraCube)}